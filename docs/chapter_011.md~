# 编程高手
# 第十一章  引狼入室

郭竞现在其实就像是一个武功很强的高手。在他目前就职的公司，不只是技术总监，同时也是核心代码程序员。此外，还是项目经理，人力资源总监。但是，有一点让他不满意的是，一直未能按他的构想建成一个有狼性的团队。这当然有多方面因素。其一，公司一直未将期权制度化。第二，公司一直未能完善激励型管理制度。第三，一些项目被一些老员工绑架了，如果这些员工不走，老板就不想换。其实，关键是第一条，郭竞感到，老板只不过是凭程序赚钱，没想过真把哪个项目做大。即使想做大，可能也不想给现在这些人。
    
就是如此，公司仍在不断招人。因为，近期招人的成果来看。后端团队已成了很强的，或者说至少很满意的团队了。
    
这一天，公司来了一位从业十年的iOS，郭竞在门口遇到了他。他突口就说，你是郭老师吧。郭竞没想到，原来这人是多年前参加活动时认识的吴信。于是，进公司后，郭竞直接跟老板说，吴信是我朋友，所以，技术方面我就不面试了，你们聊吧。于是，此人便顺利进了公司。
吴信进公司以后，不断向老板吹嘘，说他会iOS，会安卓，会html5，会VUE，会JAVA，会PHP，会ES，会微服务。几乎什么都会。这一下子可把老板和老板娘心里乐开了花。
    
不仅如此，有一天，他竟然在办公室当着老板与所有同事的面跟郭竞叫板。我的js肯定比你强，郭竞只好笑笑。其后第二天，老板娘对郭竞说，接下来我们实行九九六。郭竞心中突然有一种不祥的预感。但未做任何答复。
    
第三天下午，吴信在办公室挨个通知每一个人，“从今天开始，每天下班时间改为晚上九点。”郭竟虽很诧异，但还是很平静地说，让老板娘在钉钉群里发通知吧。
    
让郭竞大跌眼镜的是，没过多久，老板娘真的在钉钉群中发了一个通知。“为了能让团队更好地发展，从今天开始实行九九六工作制，即早上九点上班，晚上九点下班。周六加班，周日休息。”于是，全公司一下子炸锅了。当然，全是叽叽喳喳，悄悄私下在聊天。吴信一看，直接将所有人叫到了会仪室，正式宣布，并要求，如果有问题可以提出来。
这时，一位美女设计师开口问道，“这是强制的吗?”
    
“不是。”看样子，或许还懂点劳动法。
又有人问，“这是临时的，还是永久的?”
    
“临时时的。”
    
“那么，什么时间结束?”
    
“这个我还是不太清楚，我只是执行！”
当然，所有的人都清楚，这事绝对是他整出来的。
    
有人居然私下说起了段子。老板叫石言，来了个项目经理叫吴信，一个失言，一个无信，这下公司有好戏看了。
    
后续几天，事态进一步发展。从表面来看，老板肯定承诺吴信技术总监，或者Vp。而吴信得到此承诺以后开心无比。并且成了公司每晚走得最晚的人。
    
又一个周一的早晨，吴信召集技术团队开会。会上，提出了一周上线电商小程序的目标。吴信说，“我们要使用 U N I A P P 框架，这个框架是一次编写，适用安卓，iOS，Web H5，微信小程序，支付宝小程序，百度小程序，头条小程序七个终端。”
    
郭竞傻了，因为，公司所用的是ShopWind二次开发。这是一个传统架构的程序，根本就没有前后端分离。针对yii2框架，必须从零搭建API接口应用。同时，不同的终端要有不同的登录，所有这些绝对不是很小的工作量。这不是天方夜谭吗。

然而，老板找郭竞谈话了，原因很简单，因为后端团队未执行九九六。郭竞说，九九六不能这么干的。老板反问，你不是一直在提九九六吗?郭竞说，但你在钉钉中发这样的通知是很危险的。因为，别人会截图当证据申请劳动仲裁的。这时老板脸上红一阵白一阵。郭竞又说，我们要通过心理舒导，激发员工的主动性，这样，才有好代码，才有高质量的程序。但老板要求很简单，今天你们部门必须开会，强调一下项目进度。
    
郭竞并没有照着去做，而是找后端团队每一个人一一谈心，再一次用武林心法打动了他们。聊了其中一位，其他所有人都开开心心跟着郭竞加班了。这其中不加班的，效率高，技术好，并且还会前端小程序。他的两个观点相当不错。第一是，你想要我一个胳膊，我是不可能给你的。第二则是，项目急不急，并不可信，有这一次，就会有下一次。
    
对于这样的现状，郭竞也没有办法，只能硬着头皮上呀。郭竞迅速用composer安装Yii2-route, Yii2-jwt,配置路由，编写中间件，安装配置Swagger。然后，用gii创建模型。用自己写的脚本自动创建Repository。同时，安装了 Yii2-MonoLog。并且基于此编写了Loggy，其用法与laravel的Loggy完全相同。其后，又编写了数据验证，用法也与laravel的完全相同。单单把这些折腾完成，近四天过去了，就是这样，很多事也是手下小伙伴协助完成的。周四下午，后端团队正式开始写接口。
    
周五晚上，开始对接口了。结果，吴信说他遇到了跨域的问题，并一口咬定是服务器端的问题。
    
郭竞前后查了代码，所用的是Yii2自带的Cors,未能查出问题，临时在header中添加相关的配置，也就过去了。
    
这好像是解决了，但随后问题又来了，Post请求，结果服务器直接报某某变量不能为空。于是一口咬定是服务器后端的错。晚上21点，吴信在钉钉中发命令，不解决不可以下班。

同时还责问，为什么要x-form-urlencode?给个理由。郭竟对这种超级无知的问题没好气地给了个回复，这是公司后端的规范，你要改吗？
    
随后，吴信又开始指责，小程序的登录不符合微信官方时序图，可后台团队用的是EasyWeChat。一直就是这样做的，结果闹得双方相当不爽。
    
又一个周一，吴信一周上线的神话并没有实现。早上过来，郭竞检查了Cors的代码，并用test-Cors进行了测试，发现无任何问题，于是，清除了在.htaccess文件中的设置。
    
这下好了，吴信快疯了，昨天好好的，为什么今天又跨域了。裁图发到钉钉里，郭竞一看，居然用的是OPTIONS方法。这是郭竞突然想到了uni-app框架的坑。如果不设header，就是非简单请求。所以，郭竞在钉钉中一再提醒，这是前端问题，与后端没有关系。可吴信却相当蛮横地在钉钉中发消息，“我不管，我只要结果”。
    
这是郭竞绝对没有想到的，声称世界第一的js高手，居然连http请求的常识都没有。并且，不会不可怕，他不但不会，而且也相当蛮横，谁还会教你?
    
吴信没有办法，拿出绝活，到老板那告状。老板把二人叫到会议室调解。郭竟指出，客户端明明就是用的OPTION方法，所以，是客户端的错。而吴信则信口扯黄说，“我明明用的是get,欧屁涕心是选项。”
   
老板没有办法，说他不懂技术，请求双方拿出解决方案。吴信说，全部改为Post方法。并恶很很地说，你有什么好方案也可以拿出来呀。郭竞冷冷地说，你听好了，用unifly, U N I F L Y。但让郭竞没有想到的是，半小时后，贴出一张unifly调用，依旧跨域的图。郭竞崩溃了。见过很多傻子，但从未见过这么傻的。见过很多蠢猪，但从未见过这么蠢的。
   
第二天，郭竞让小伙伴手把手教他把这段代码调通。
    
又一周过去了，又是一个周一，吴信这一次主持的会议仅剩下它一人自说自话。
   
不幸的事情又发生了，本来吴信认为没有问题的post方法，地区三级联动接口却在第二次调用时出现跨域。这时，吴信居然要求服务器端增加OPTIONS方法。郭竞绝对没有想到，人可以无耻，但无耻到这一地步的还是第一次见到，真是无耻中的极品，前两天刚刚在老板面前拿人头担保，说OPTIONS是选项的。现在又自己打自己耳光，要添加OPTIONS方法。后端小伙伴懶得理他，你要加，就给你加。但悲剧是必然的，是个PHP程序员都了解，只在Cors中加OPTIONS是行不通的。折腾很久，吴信终于想出一个秒招，把地区数据变成JSON放在客户端。
   
事后当晚与一朋友聊起此事，朋友随即“哈哈哈哈哈哈哈哈哈哈，先给他十个哈，真好笑，他试过get吗?肯定没有吧，get的代码可是你的小伙伴手把手教他写出来的呀。跟蠢猪吓死我了，被吓得不轻。”
  




[上一章](https://github.com/BardoQi/CodeGuru/blob/master/docs/chapter_010.md  "上一章")
[目录](https://github.com/BardoQi/CodeGuru  "目录")
[下一章](https://github.com/BardoQi/CodeGuru/blob/master/docs/chapter_012.md  "下一章")
